<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Notes from My Journey Learning Javascript and React.js | David Xiao&#39;s Garage</title>
<meta name="keywords" content="javascript, react.js">
<meta name="description" content="The Good, the Bad and the Ugly.">
<meta name="author" content="David Xiao">
<link rel="canonical" href="https://davidxiao.me/posts/notes-from-my-journey-in-reactjs/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.deec51b4ebb14229cda677d98d194ddeeebc27943c57f551ca001ed945bcb9ec.css" integrity="sha256-3uxRtOuxQinNpnfZjRlN3u68J5Q8V/VRygAe2UW8uew=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://davidxiao.me/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://davidxiao.me/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://davidxiao.me/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://davidxiao.me/apple-touch-icon.png">
<link rel="mask-icon" href="https://davidxiao.me/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="Notes from My Journey Learning Javascript and React.js" />
<meta property="og:description" content="The Good, the Bad and the Ugly." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://davidxiao.me/posts/notes-from-my-journey-in-reactjs/" /><meta property="og:image" content="https://davidxiao.me/posts/notes-from-my-journey-in-reactjs/featured.jpg"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-06-14T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-06-21T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://davidxiao.me/posts/notes-from-my-journey-in-reactjs/featured.jpg"/>
<meta name="twitter:title" content="Notes from My Journey Learning Javascript and React.js"/>
<meta name="twitter:description" content="The Good, the Bad and the Ugly."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Posts",
      "item": "https://davidxiao.me/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Notes from My Journey Learning Javascript and React.js",
      "item": "https://davidxiao.me/posts/notes-from-my-journey-in-reactjs/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Notes from My Journey Learning Javascript and React.js",
  "name": "Notes from My Journey Learning Javascript and React.js",
  "description": "The Good, the Bad and the Ugly.",
  "keywords": [
    "javascript", "react.js"
  ],
  "articleBody": "TLDR\nAs a recovering C++ developer learning React, I put together some notes along the journey.\nSome of the notes and example code were extracted from the materials listed in the reference. I‚Äôve tried to include links but feel free to let me know if I missed something.\nCredit goes to the original authors.\nReference Step-by-step guide. Great learning material. What is React.js React is a declarative, efficient, and flexible JavaScript library for building user interfaces. It has a few building blocks such as elements, components etc.\nReactjs.org\nElements An element describes what you want to see on the screen:\nconst element = \u003ch1\u003eHello world\u003c/h1\u003e; const div1 = \u003cdiv /\u003e; Components Elements such as are defined in HTML5. React extends it by introducing user-defined elements such as\n\u003cWelcome name=\"Sara\" /\u003e Welcome is a user-defined component. In React, always start component names with a capital letter to follow the naming convention.\nWhy Components Components let you split the UI into independent, reusable pieces, and think about each piece in isolation.\nReact component can be declared as a JS function or a JS class. Either way, it accepts input (called ‚Äúprops‚Äù) and return React elements describing what should appear on the screen.\nWhen React sees an element representing a user-defined component, it wraps up JSX attributes and children and passes it as a single object (called props) to the component implicitly without user code.\npropsstands for properties.\nReact function An example:\nfunction Welcome(props) { return \u003ch1\u003eHello, {props.name}\u003c/h1\u003e; } const element = \u003cWelcome name=\"Sara\" /\u003e; ReactDOM.render( element, document.getElementById('root') ); JS code starts at the top of the file. It gets executed from top to bottom. There is no entry point such as what ‚Äúmain()‚Äù has to do in C++.\nWhat happens in the example above is:\nReact calls ReactDOM.render() with the React sees Welcome is a user-defined component and calls its corresponding function with {name: 'Sara'} as the props.\nWelcome component returns Hello, Sara as the result.\nReact takes care of updating the DOM with Hello, Sara.\nReact class The function component example above can be equivalently rewritten as a class component:\nclass Welcome extends React.Component { render() { return \u003ch1\u003eHello, {this.props.name}\u003c/h1\u003e; } } React class component always ‚Äúinherited‚Äù from React.Component.\nrender() is the only method that any class ‚Äúinherited‚Äù from React.Component must declare.\nThink of render() as a C++ pure virtual function in React.Component.\nA derived class would have to implement it before the class can be instantiated.\nCalling a component in another component Let‚Äôs take function component as an example.\ngraph TD; Comment--\u003eUserInfo--\u003eAvatar; Comment passed the value of its own props.author to UserInfo.\nfunction Comment(props) { return ( \u003cdiv className=\"Comment\"\u003e \u003cUserInfo user={props.author} /\u003e \u003cdiv className=\"Comment-text\"\u003e {props.text} \u003c/div\u003e \u003cdiv className=\"Comment-date\"\u003e {formatDate(props.date)} \u003c/div\u003e \u003c/div\u003e ); } UserInfo‚Äôs props contains a key value pair ‚Äúuser=‚Ä¶‚Äù received from Comment. The value then gets passed down to Avatar.\nfunction UserInfo(props) { return ( \u003cdiv className=\"UserInfo\"\u003e \u003cAvatar user={props.user} /\u003e \u003cdiv className=\"UserInfo-name\"\u003e {props.user.name} \u003c/div\u003e \u003c/div\u003e ); } Props Props gets passed to the constructor of class and stored as a class variable. Any method thereafer can reference it using this.props\nIn a class component, think of this.props as a const reference member variable in C++.\nIt is initiated within constructor(props) where super(props) is called, the superclass always being React.Component.\nWe recommend naming props from the component‚Äôs own point of view rather than the context in which it is being used. The rationale being: It doesn‚Äôt need to know context such as where it is being rendered.\nThat‚Äôs a sort of isolation that helps in producing clear code.\nProps are Immutable Whether you declare a component as a function or a class, it must never modify its own props.\nThe following code is valid in javascript syntax but should not be used as React component as it changes its own input:\nfunction withdraw(account, amount) { account.total -= amount; } Think of JS function parameter as pass by reference in C++.\nIn React, treat props as if it is const reference in C++.\nClass, State and Lifecycle One difference between class and function is that class has a special object called this.states. states acts as a ‚Äúcontainer‚Äù that preserves variables between calls. In other words, class oject is ‚Äústateful‚Äù while function is ‚Äústateless‚Äù.\nA class has a few built-in methods including:\nconstructor(). See here\ncomponentDidMount(). It is called when the object is rendered to the DOM for the first time. See here\ncomponentWillUnmount(). It is called when the DOM produced by the object is removed. See here\nA diagram to help understand lifecycle:\nReact lifecycle methods diagram For a visual reference, click here\nstate is a built-in object in class.\nClick to see code example and explainations class Clock extends React.Component { constructor(props) { // for a React.Component subclass, you should call // super(props) before any other statement super(props); // in constructor, you should not call setState(), // instead, assign the initial state to this.state directly this.state = {date: new Date()}; } componentDidMount() { this.timerID = setInterval( () =\u003e this.tick(), 1000 ); } componentWillUnmount() { clearInterval(this.timerID); } tick() { this.setState({ date: new Date() }); } render() { return ( \u003cdiv\u003e \u003ch1\u003eHello, world!\u003c/h1\u003e \u003ch2\u003eIt is {this.state.date.toLocaleTimeString()}.\u003c/h2\u003e\u003c/h2\u003e\u003c/h2\u003e \u003c/div\u003e ); } } ReactDOM.render( \u003cClock /\u003e, document.getElementById('root') ); When is passed to ReactDOM.render(), React calls the constructor of the Clock component. Since Clock needs to display the current time, it initializes this.state with an object including the current time. We will later update this state.\nReact then calls the Clock component‚Äôs render() method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the Clock‚Äôs render output.\nWhen the Clock output is inserted in the DOM, React calls the componentDidMount() lifecycle method. Inside it, the Clock component asks the browser to set up a timer to call the component‚Äôs tick() method once a second.\nEvery second the browser calls the tick() method. Inside it, the Clock component schedules a UI update by calling setState() with an object containing the current time.\nüëâ Important: Thanks to the setState() call, React knows the state has changed, and calls the render() method again to learn what should be on the screen. This time, this.state.date in the render() method will be different, and so the render output will include the updated time. React updates the DOM accordingly.\nIf the Clock component is ever removed from the DOM, React calls the componentWillUnmount() lifecycle method so the timer is stopped.\nProps vs State This is a growing list.\n‚Äúrendered‚Äù value In React, both this.props and this.state represent the rendered values, i.e. what‚Äôs currently on the screen.\nBoth props and state can be accessed by ‚Äúthis‚Äù Both this.state and this.props are valid within the class scope.\nProps are immutable It is not supposed to be modified in any way. If the component needs to be ‚Äústateful‚Äù during the calls, always use state.\nAvoid Copying Props into State constructor(props) { super(props); // Don't do this! this.state = { color: props.color }; } This is a common mistake. It‚Äôs unnecessary (use this.props.color instead) and prone to bugs (updates to the color prop won‚Äôt be reflected in the state).\nOnly use it if you want to disregard prop updates. In that case, it makes sense to rename the prop to be called initialColor or defaultColor. You can then force a component to ‚Äúreset‚Äù its internal state by changing its key when necessary.\nRead this post on avoiding derived state to learn about what to do if you think you need some state to depend on the props.\nReactjs.org\nState Updates May Be Asynchronous setState() ‚Äúschedules‚Äù an update to a component‚Äôs state object. When state changes, the component responds by re-rendering.\nConsider using setState() that accepts a function rather than an object when you need to update state variables.\nReact may batch multiple setState() calls into a single update for performance. In React, state must only be updated by setState() (only exception is within constructor()).\nThis is because manual updates won‚Äôt trigger UI updates since React doesn‚Äôt know state has changed.\nTo fix it, use a second form of setState() that accepts a ‚Äúupdater‚Äù function object as parameter.\n// Wrong. counter may not be updated immediately since setState() may be delayed in execution by React this.setState({ counter: this.state.counter + this.props.increment, }); // Correct. See explaination above this.setState((state, props) =\u003e ({ counter: state.counter + props.increment })); In React, ‚Äúupdater‚Äù function takes the following signature:\n(state, props) =\u003e stateChange The return value of the updater is shallowly merged with state. For example, in the following code, the return value of the function. will be assigned to state.counter:\nthis.setState((state, props) =\u003e { return {counter: state.counter + props.step}; }); State holds all its variables React merges the object you provide into the current state.\nconstructor(props) { super(props); this.state = { posts: [], comments: [] }; } When you update comments with the following code, it leaves this.state.posts intact, but completely replaces this.state.comments.\nState is not accessible to other components State is not accessible to any component other than the one that owns and sets it.\nThink of state as a ‚Äúprotected‚Äù member variable encapsulated in React.Component class. It can be accessed by its derived classed but not from outside. It is the philosophy that neither parent nor child components can know if a certain component is stateful or stateless, and they shouldn‚Äôt care its implementation details, such as whether it is defined as a function or a class.\nIn React apps, whether a component is stateful or stateless is considered an implementation detail of the component that may change over time. You can use stateless components inside stateful components, and vice versa.\nBe cautious about using ‚Äúthis‚Äù in a class method Unlike in C++ where this is accessible in any class method including in the constructor, in JS, this is undefined until it is bound.\nFirst, let‚Äôs take a look at this example where I purposely made an attempt to access this in constructor and get the following error:\nUncaught ReferenceError: Must call super constructor in derived class before accessing 'this' or returning from derived constructor at pen.js:-12 Second, in member methods this is undefined until it is bound.\nIn the following example code, if you forget to bind this.handleClick and pass it to onClick, this will be undefined when the function is actually called.\nThis is not React-specific; it is a part of how functions work in JavaScript.\nGenerally, if you refer to a method without () after it, such as onClick={this.handleClick}, you should bind that method.\nThere are two (recommended) ways to do it:\n// bind a method in constructor constructor(props) { super(props); this.state = {isToggleOn: true}; // This binding is necessary to make `this` work in the callback this.handleClick = this.handleClick.bind(this); } // or the following way handleClick = () =\u003e { console.log('this is:', this); } In either way, the method is bound and the render() will work:\nrender() { return ( \u003cbutton onClick={this.handleClick}\u003e Click me \u003c/button\u003e ); } ",
  "wordCount" : "1829",
  "inLanguage": "en",
  "datePublished": "2020-06-14T00:00:00Z",
  "dateModified": "2020-06-21T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "David Xiao"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://davidxiao.me/posts/notes-from-my-journey-in-reactjs/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "David Xiao's Garage",
    "logo": {
      "@type": "ImageObject",
      "url": "https://davidxiao.me/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://davidxiao.me/" accesskey="h" title="David Xiao&#39;s Garage (Alt + H)">David Xiao&#39;s Garage</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://davidxiao.me/tags/" title="Tags">
                    <span>Tags</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://davidxiao.me/">Home</a>&nbsp;¬ª&nbsp;<a href="https://davidxiao.me/posts/">Posts</a></div>
    <h1 class="post-title">
      Notes from My Journey Learning Javascript and React.js
    </h1>
    <div class="post-meta"><span title='2020-06-14 00:00:00 +0000 UTC'>June 14, 2020</span>&nbsp;¬∑&nbsp;9 min&nbsp;¬∑&nbsp;David Xiao&nbsp;|&nbsp;<a href="https://github.com/davxiao/davidxiao-web/tree/master/content/posts/notes-from-my-journey-in-reactjs/index.md" rel="noopener noreferrer" target="_blank">Suggest Changes</a>

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#reference" aria-label="Reference">Reference</a></li>
                <li>
                    <a href="#what-is-reactjs" aria-label="What is React.js">What is React.js</a></li>
                <li>
                    <a href="#elements" aria-label="Elements">Elements</a></li>
                <li>
                    <a href="#components" aria-label="Components">Components</a><ul>
                        
                <li>
                    <a href="#why-components" aria-label="Why Components">Why Components</a></li>
                <li>
                    <a href="#react-function" aria-label="React function">React function</a></li>
                <li>
                    <a href="#react-class" aria-label="React class">React class</a></li></ul>
                </li>
                <li>
                    <a href="#calling-a-component-in-another-component" aria-label="Calling a component in another component">Calling a component in another component</a></li>
                <li>
                    <a href="#props" aria-label="Props">Props</a><ul>
                        
                <li>
                    <a href="#props-are-immutable" aria-label="Props are Immutable">Props are Immutable</a></li></ul>
                </li>
                <li>
                    <a href="#class-state-and-lifecycle" aria-label="Class, State and Lifecycle">Class, State and Lifecycle</a></li>
                <li>
                    <a href="#props-vs-state" aria-label="Props vs State">Props vs State</a><ul>
                        
                <li>
                    <a href="#rendered-value" aria-label="&amp;ldquo;rendered&amp;rdquo; value">&ldquo;rendered&rdquo; value</a></li>
                <li>
                    <a href="#both-props-and-state-can-be-accessed-by-this" aria-label="Both props and state can be accessed by &amp;ldquo;this&amp;rdquo;">Both props and state can be accessed by &ldquo;this&rdquo;</a></li>
                <li>
                    <a href="#props-are-immutable-1" aria-label="Props are immutable">Props are immutable</a></li>
                <li>
                    <a href="#avoid-copying-props-into-state" aria-label="Avoid Copying Props into State">Avoid Copying Props into State</a></li>
                <li>
                    <a href="#state-updates-may-be-asynchronous" aria-label="State Updates May Be Asynchronous">State Updates May Be Asynchronous</a></li>
                <li>
                    <a href="#state-holds-all-its-variables" aria-label="State holds all its variables">State holds all its variables</a></li>
                <li>
                    <a href="#state-is-not-accessible-to-other-components" aria-label="State is not accessible to other components">State is not accessible to other components</a></li>
                <li>
                    <a href="#be-cautious-about-using-this-in-a-class-method" aria-label="Be cautious about using &amp;ldquo;this&amp;rdquo; in a class method">Be cautious about using &ldquo;this&rdquo; in a class method</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>TLDR</p>
<p>As a recovering C++ developer learning React, I put together some notes along the journey.</p>
<p>Some of the notes and example code were extracted from the materials listed in the reference. I&rsquo;ve tried to include links but feel free to let me know if I missed something.</p>
<p>Credit goes to the original authors.</p>
<h2 id="reference">Reference<a hidden class="anchor" aria-hidden="true" href="#reference">#</a></h2>
<ul>
<li><a href="https://reactjs.org/docs/hello-world.html">Step-by-step guide</a>. Great learning material.</li>
</ul>
<h2 id="what-is-reactjs">What is React.js<a hidden class="anchor" aria-hidden="true" href="#what-is-reactjs">#</a></h2>
<blockquote>
<p>React is a declarative, efficient, and flexible JavaScript library for building user interfaces. It has a few building blocks such as elements, components etc.</p>
<p><a href="https://reactjs.org/tutorial/tutorial.html#what-is-react">Reactjs.org</a></p>
</blockquote>
<h2 id="elements">Elements<a hidden class="anchor" aria-hidden="true" href="#elements">#</a></h2>
<p>An element describes what you want to see on the screen:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span> <span class="nx">world</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">div1</span> <span class="o">=</span> <span class="p">&lt;</span><span class="nt">div</span> <span class="p">/&gt;;</span>
</span></span></code></pre></div><h2 id="components">Components<a hidden class="anchor" aria-hidden="true" href="#components">#</a></h2>
<p>Elements such as <code>&lt;div /&gt;</code> are defined in <a href="https://developer.mozilla.org/docs/Web/HTML/Element/div">HTML5</a>. React extends it by introducing user-defined elements such as</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Welcome</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Sara&#34;</span> <span class="p">/&gt;</span>
</span></span></code></pre></div><p><code>Welcome</code> is a user-defined component. In React, always start component names with a capital letter to follow the naming convention.</p>
<h3 id="why-components">Why Components<a hidden class="anchor" aria-hidden="true" href="#why-components">#</a></h3>
<p>Components let you split the UI into independent, reusable pieces, and think about each piece in isolation.</p>
<p>React component can be declared as a JS function or a JS class. Either way, it accepts input (called ‚Äúprops‚Äù) and return React elements describing what should appear on the screen.</p>
<p>When React sees an element representing a user-defined component, it wraps up JSX attributes and children and passes it as a single object (called <code>props</code>) to the component implicitly without user code.</p>
<p><code>props</code>stands for properties.</p>
<h3 id="react-function">React function<a hidden class="anchor" aria-hidden="true" href="#react-function">#</a></h3>
<p>An example:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Welcome</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">element</span> <span class="o">=</span> <span class="p">&lt;</span><span class="nt">Welcome</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;Sara&#34;</span> <span class="p">/&gt;;</span>
</span></span><span class="line"><span class="cl"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="nx">element</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></div><p>JS code starts at the top of the file. It gets executed from top to bottom. There is no entry point such as what &ldquo;main()&rdquo; has to do in C++.</p>
<p>What happens in the example above is:</p>
<ol>
<li>
<p>React calls ReactDOM.render() with the <code>&lt;Welcome name=&quot;Sara&quot; /&gt;</code></p>
</li>
<li>
<p>React sees <code>Welcome</code> is a user-defined component and calls its corresponding function with <code>{name: 'Sara'}</code> as the props.</p>
</li>
<li>
<p>Welcome component returns <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code> as the result.</p>
</li>
<li>
<p>React takes care of updating the DOM with <code>&lt;h1&gt;Hello, Sara&lt;/h1&gt;</code>.</p>
</li>
</ol>
<h3 id="react-class">React class<a hidden class="anchor" aria-hidden="true" href="#react-class">#</a></h3>
<p>The function component example above can be equivalently rewritten as a class component:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Welcome</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">name</span><span class="p">}&lt;/</span><span class="nt">h1</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>React class component always &ldquo;inherited&rdquo; from <code>React.Component</code>.</p>
<p><code>render()</code> is the only method that any class &ldquo;inherited&rdquo; from <code>React.Component</code> must declare.</p>
<div class="alert alert-note">
  <div>
    <p>Think of <code>render()</code> as a C++ pure virtual function in <code>React.Component</code>.</p>
<p>A derived class would have to implement it before the class can be instantiated.</p>
  </div>
</div>
<h2 id="calling-a-component-in-another-component">Calling a component in another component<a hidden class="anchor" aria-hidden="true" href="#calling-a-component-in-another-component">#</a></h2>
<p>Let&rsquo;s take function component as an example.</p>
<pre tabindex="0"><code class="language-mermaid" data-lang="mermaid">graph TD;
  Comment--&gt;UserInfo--&gt;Avatar;
</code></pre><p>Comment passed the value of its own <code>props.author</code> to UserInfo.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">Comment</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;Comment&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">UserInfo</span> <span class="na">user</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">author</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;Comment-text&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">text</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;Comment-date&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">formatDate</span><span class="p">(</span><span class="nx">props</span><span class="p">.</span><span class="nx">date</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>UserInfo&rsquo;s props contains a key value pair &ldquo;user=&hellip;&rdquo; received from Comment. The value then gets passed down to Avatar.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">UserInfo</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;UserInfo&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Avatar</span> <span class="na">user</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">user</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;UserInfo-name&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">user</span><span class="p">.</span><span class="nx">name</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><h2 id="props">Props<a hidden class="anchor" aria-hidden="true" href="#props">#</a></h2>
<p>Props gets passed to the constructor of class and stored as a class variable. Any method thereafer can reference it using <code>this.props</code></p>
<div class="alert alert-note">
  <div>
    <p>In a class component, think of <code>this.props</code> as a const reference member variable in C++.</p>
<p>It is initiated within <code>constructor(props)</code> where <code>super(props)</code> is called, the superclass always being <code>React.Component</code>.</p>
  </div>
</div>
<p>We recommend naming props from the component‚Äôs own point of view rather than the context in which it is being used. The rationale being: It doesn‚Äôt need to know context such as where it is being rendered.</p>
<p>That&rsquo;s a sort of isolation that helps in producing clear code.</p>
<h3 id="props-are-immutable">Props are Immutable<a hidden class="anchor" aria-hidden="true" href="#props-are-immutable">#</a></h3>
<p>Whether you declare a component as a function or a class, it must never modify its own props.</p>
<p>The following code is valid in javascript syntax but should not be used as React component as it changes its own input:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kd">function</span> <span class="nx">withdraw</span><span class="p">(</span><span class="nx">account</span><span class="p">,</span> <span class="nx">amount</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">account</span><span class="p">.</span><span class="nx">total</span> <span class="o">-=</span> <span class="nx">amount</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><div class="alert alert-note">
  <div>
    <p>Think of JS function parameter as pass by reference in C++.</p>
<p>In React, treat <code>props</code> as if it is const reference in C++.</p>
  </div>
</div>
<h2 id="class-state-and-lifecycle">Class, State and Lifecycle<a hidden class="anchor" aria-hidden="true" href="#class-state-and-lifecycle">#</a></h2>
<p>One difference between class and function is that class has a special object called <code>this.states</code>. states acts as a &ldquo;container&rdquo; that preserves variables between calls. In other words, class oject is &ldquo;stateful&rdquo; while function is &ldquo;stateless&rdquo;.</p>
<p>A class has a few built-in methods including:</p>
<ul>
<li>
<p><code>constructor()</code>. See <a href="https://reactjs.org/docs/react-component.html#constructor">here</a></p>
</li>
<li>
<p><code>componentDidMount()</code>. It is called when the object is rendered to the DOM for the first time. See <a href="https://reactjs.org/docs/react-component.html#componentdidmount">here</a></p>
</li>
<li>
<p><code>componentWillUnmount()</code>. It is called when the DOM produced by the object is removed. See <a href="https://reactjs.org/docs/react-component.html#componentwillunmount">here</a></p>
</li>
</ul>
<p>A diagram to help understand lifecycle:</p>
<figure>
    <img loading="lazy" src="lifecycle.png"/> <figcaption>
            React lifecycle methods diagram
        </figcaption>
</figure>

<p>For a visual reference, click <a href="https://projects.wojtekmaj.pl/react-lifecycle-methods-diagram/">here</a></p>
<p><code>state</code> is a built-in object in class.</p>
<details>
  <summary>Click to see code example and explainations</summary>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">Clock</span> <span class="kr">extends</span> <span class="nx">React</span><span class="p">.</span><span class="nx">Component</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// for a React.Component subclass, you should call 
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// super(props) before any other statement
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// in constructor, you should not call setState(),
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="c1">// instead, assign the initial state to this.state directly
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()};</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">componentDidMount</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">timerID</span> <span class="o">=</span> <span class="nx">setInterval</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">()</span> <span class="p">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="nx">tick</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">      <span class="mi">1000</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">componentWillUnmount</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">clearInterval</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">timerID</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">tick</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">date</span><span class="o">:</span> <span class="k">new</span> <span class="nb">Date</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h1</span><span class="p">&gt;</span><span class="nx">Hello</span><span class="p">,</span> <span class="nx">world</span><span class="o">!</span><span class="p">&lt;/</span><span class="nt">h1</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">h2</span><span class="p">&gt;</span><span class="nx">It</span> <span class="nx">is</span> <span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">date</span><span class="p">.</span><span class="nx">toLocaleTimeString</span><span class="p">()}.&lt;/</span><span class="nt">h2</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="nx">ReactDOM</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">Clock</span> <span class="p">/&gt;,</span>
</span></span><span class="line"><span class="cl">  <span class="nb">document</span><span class="p">.</span><span class="nx">getElementById</span><span class="p">(</span><span class="s1">&#39;root&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="p">);</span>
</span></span></code></pre></div><ol>
<li>
<p>When <code>&lt;Clock /&gt;</code> is passed to <code>ReactDOM.render()</code>, React calls the constructor of the Clock component. Since Clock needs to display the current time, it initializes <code>this.state</code> with an object including the current time. We will later update this state.</p>
</li>
<li>
<p>React then calls the Clock component‚Äôs <code>render()</code> method. This is how React learns what should be displayed on the screen. React then updates the DOM to match the Clock‚Äôs render output.</p>
</li>
<li>
<p>When the Clock output is inserted in the DOM, React calls the <code>componentDidMount()</code> lifecycle method. Inside it, the Clock component asks the browser to set up a timer to call the component‚Äôs <code>tick()</code> method once a second.</p>
</li>
<li>
<p>Every second the browser calls the <code>tick()</code> method. Inside it, the Clock component schedules a UI update by calling <code>setState()</code> with an object containing the current time.</p>
<p>üëâ Important: Thanks to the <code>setState()</code> call, React knows the state has changed, and calls the render() method again to learn what should be on the screen. This time, <code>this.state.date</code> in the <code>render()</code> method will be different, and so the render output will include the updated time. React updates the DOM accordingly.</p>
</li>
<li>
<p>If the Clock component is ever removed from the DOM, React calls the <code>componentWillUnmount()</code> lifecycle method so the timer is stopped.</p>
</li>
</ol>
</details>
<h2 id="props-vs-state">Props vs State<a hidden class="anchor" aria-hidden="true" href="#props-vs-state">#</a></h2>
<p>This is a growing list.</p>
<h3 id="rendered-value">&ldquo;rendered&rdquo; value<a hidden class="anchor" aria-hidden="true" href="#rendered-value">#</a></h3>
<p>In React, both this.props and this.state represent the rendered values, i.e. what‚Äôs currently on the screen.</p>
<h3 id="both-props-and-state-can-be-accessed-by-this">Both props and state can be accessed by &ldquo;this&rdquo;<a hidden class="anchor" aria-hidden="true" href="#both-props-and-state-can-be-accessed-by-this">#</a></h3>
<p>Both <code>this.state</code> and <code>this.props</code> are valid within the class scope.</p>
<h3 id="props-are-immutable-1">Props are immutable<a hidden class="anchor" aria-hidden="true" href="#props-are-immutable-1">#</a></h3>
<p>It is not supposed to be modified in any way. If the component needs to be &ldquo;stateful&rdquo; during the calls, always use state.</p>
<h3 id="avoid-copying-props-into-state">Avoid Copying Props into State<a hidden class="anchor" aria-hidden="true" href="#avoid-copying-props-into-state">#</a></h3>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl"><span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="c1">// Don&#39;t do this!
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">color</span><span class="o">:</span> <span class="nx">props</span><span class="p">.</span><span class="nx">color</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>  <details>
    <summary>This is a common mistake.</summary>
<p>It‚Äôs unnecessary (use <code>this.props.color</code> instead) and prone to bugs (updates to the <code>color</code> prop won‚Äôt be reflected in the state).</p>
<p>Only use it if you want to disregard prop updates. <del>In that case, it makes sense to rename the prop to be called <code>initialColor</code> or <code>defaultColor</code>. You can then force a component to ‚Äúreset‚Äù its internal state by changing its key when necessary.</del></p>
<p>Read <a href="https://reactjs.org/blog/2018/06/07/you-probably-dont-need-derived-state.html">this post</a> on avoiding derived state to learn about what to do if you think you need some state to depend on the props.</p>
<p><a href="https://reactjs.org/docs/react-component.html#constructor">Reactjs.org</a></p>
  </details>
<h3 id="state-updates-may-be-asynchronous">State Updates May Be Asynchronous<a hidden class="anchor" aria-hidden="true" href="#state-updates-may-be-asynchronous">#</a></h3>
<p><code>setState()</code> &ldquo;schedules&rdquo; an update to a component‚Äôs state object. When state changes, the component responds by re-rendering.</p>
<p>Consider using setState() that accepts a function rather than an object when you need to update state variables.</p>
<details>
    <summary>React may batch multiple setState() calls into a single update for performance.</summary>
<p>In React, <code>state</code> must only be updated by <code>setState()</code> (only exception is within <code>constructor()</code>).</p>
<p>This is because manual updates won&rsquo;t trigger UI updates since React doesn&rsquo;t know state has changed.</p>
<p>To fix it, use a second form of setState() that accepts a &ldquo;updater&rdquo; function object as parameter.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="c1">// Wrong. counter may not be updated immediately since setState() may be delayed in execution by React
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">counter</span><span class="o">:</span> <span class="k">this</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">props</span><span class="p">.</span><span class="nx">increment</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Correct. See explaination above
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">((</span><span class="nx">state</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">counter</span><span class="o">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+</span> <span class="nx">props</span><span class="p">.</span><span class="nx">increment</span>
</span></span><span class="line"><span class="cl"><span class="p">}));</span>
</span></span></code></pre></div><p>In React, &ldquo;updater&rdquo; function takes the following signature:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="p">(</span><span class="nx">state</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">stateChange</span>
</span></span></code></pre></div><p>The return value of the <code>updater</code> is shallowly merged with state. For example, in the following code,  the return value of the function. will be assigned to <code>state.counter</code>:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="k">this</span><span class="p">.</span><span class="nx">setState</span><span class="p">((</span><span class="nx">state</span><span class="p">,</span> <span class="nx">props</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span><span class="nx">counter</span><span class="o">:</span> <span class="nx">state</span><span class="p">.</span><span class="nx">counter</span> <span class="o">+</span> <span class="nx">props</span><span class="p">.</span><span class="nx">step</span><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">});</span>
</span></span></code></pre></div></details>
<h3 id="state-holds-all-its-variables">State holds all its variables<a hidden class="anchor" aria-hidden="true" href="#state-holds-all-its-variables">#</a></h3>
<p>React merges the object you provide into the current state.</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">posts</span><span class="o">:</span> <span class="p">[],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">comments</span><span class="o">:</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>When you update <code>comments</code> with the following code, it leaves <code>this.state.posts</code> intact, but completely replaces <code>this.state.comments</code>.</p>
<h3 id="state-is-not-accessible-to-other-components">State is not accessible to other components<a hidden class="anchor" aria-hidden="true" href="#state-is-not-accessible-to-other-components">#</a></h3>
<p>State is not accessible to any component other than the one that owns and sets it.</p>
<div class="alert alert-note">
  <div>
    Think of state as a &ldquo;protected&rdquo; member variable encapsulated in React.Component class. It can be accessed by its derived classed but not from outside.
  </div>
</div>
<p>It is the philosophy that neither parent nor child components can know if a certain component is stateful or stateless, and they shouldn‚Äôt care its implementation details, such as whether it is defined as a function or a class.</p>
<p>In React apps, whether a component is stateful or stateless is considered an implementation detail of the component that may change over time. You can use stateless components inside stateful components, and vice versa.</p>
<h3 id="be-cautious-about-using-this-in-a-class-method">Be cautious about using &ldquo;this&rdquo; in a class method<a hidden class="anchor" aria-hidden="true" href="#be-cautious-about-using-this-in-a-class-method">#</a></h3>
<p>Unlike in C++ where <code>this</code> is accessible in any class method including in the constructor, in JS, <code>this</code> is <code>undefined</code> until it is bound.</p>
<p>First, let&rsquo;s take a look at <a href="https://codepen.io/davxiao/pen/PoZpajQ">this example</a> where I purposely made an attempt to access <code>this</code> in constructor and get the following error:</p>
<pre tabindex="0"><code>Uncaught ReferenceError: Must call super constructor in derived class before accessing &#39;this&#39; or returning from derived constructor
 at pen.js:-12
</code></pre><p>Second, in member methods <code>this</code> is <code>undefined</code> until it is bound.</p>
<p>In the following example code, if you forget to bind <code>this.handleClick</code> and pass it to <code>onClick</code>, this will be undefined when the function is actually called.</p>
<p>This is not React-specific; it is a part of <a href="https://www.smashingmagazine.com/2014/01/understanding-javascript-function-prototype-bind/">how functions work in JavaScript</a>.</p>
<p>Generally, if you refer to a method without () after it, such as onClick={this.handleClick}, you should bind that method.</p>
<p>There are two (recommended) ways to do it:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="c1">// bind a method in constructor
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">constructor</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">super</span><span class="p">(</span><span class="nx">props</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">this</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span><span class="nx">isToggleOn</span><span class="o">:</span> <span class="kc">true</span><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// This binding is necessary to make `this` work in the callback
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">.</span><span class="nx">bind</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// or the following way
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="nx">handleClick</span> <span class="o">=</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;this is:&#39;</span><span class="p">,</span> <span class="k">this</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div><p>In either way, the method is bound and the render() will work:</p>
<div class="highlight"><pre tabindex="0" class="chroma"><code class="language-jsx" data-lang="jsx"><span class="line"><span class="cl"><span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="k">this</span><span class="p">.</span><span class="nx">handleClick</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="nx">Click</span> <span class="nx">me</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></div>

  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://davidxiao.me/tags/javascript/">javascript</a></li>
      <li><a href="https://davidxiao.me/tags/react.js/">react.js</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://davidxiao.me/posts/what-ive-been-reading/">
    <span class="title">¬´ Prev</span>
    <br>
    <span>What I have Been Reading</span>
  </a>
  <a class="next" href="https://davidxiao.me/posts/my-awesome-github-cheatsheet/">
    <span class="title">Next ¬ª</span>
    <br>
    <span>My Awesome GitHub CheatSheet</span>
  </a>
</nav>


<div class="share-buttons">
    <a target="_blank" rel="noopener noreferrer" aria-label="share Notes from My Journey Learning Javascript and React.js on twitter"
        href="https://twitter.com/intent/tweet/?text=Notes%20from%20My%20Journey%20Learning%20Javascript%20and%20React.js&amp;url=https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f&amp;hashtags=javascript%2creact.js">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-253.927,424.544c135.939,0 210.268,-112.643 210.268,-210.268c0,-3.218 0,-6.437 -0.153,-9.502c14.406,-10.421 26.973,-23.448 36.935,-38.314c-13.18,5.824 -27.433,9.809 -42.452,11.648c15.326,-9.196 26.973,-23.602 32.49,-40.92c-14.252,8.429 -30.038,14.56 -46.896,17.931c-13.487,-14.406 -32.644,-23.295 -53.946,-23.295c-40.767,0 -73.87,33.104 -73.87,73.87c0,5.824 0.613,11.494 1.992,16.858c-61.456,-3.065 -115.862,-32.49 -152.337,-77.241c-6.284,10.881 -9.962,23.601 -9.962,37.088c0,25.594 13.027,48.276 32.95,61.456c-12.107,-0.307 -23.448,-3.678 -33.41,-9.196l0,0.92c0,35.862 25.441,65.594 59.311,72.49c-6.13,1.686 -12.72,2.606 -19.464,2.606c-4.751,0 -9.348,-0.46 -13.946,-1.38c9.349,29.426 36.628,50.728 68.965,51.341c-25.287,19.771 -57.164,31.571 -91.8,31.571c-5.977,0 -11.801,-0.306 -17.625,-1.073c32.337,21.15 71.264,33.41 112.95,33.41Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Notes from My Journey Learning Javascript and React.js on linkedin"
        href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f&amp;title=Notes%20from%20My%20Journey%20Learning%20Javascript%20and%20React.js&amp;summary=Notes%20from%20My%20Journey%20Learning%20Javascript%20and%20React.js&amp;source=https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-288.985,423.278l0,-225.717l-75.04,0l0,225.717l75.04,0Zm270.539,0l0,-129.439c0,-69.333 -37.018,-101.586 -86.381,-101.586c-39.804,0 -57.634,21.891 -67.617,37.266l0,-31.958l-75.021,0c0.995,21.181 0,225.717 0,225.717l75.02,0l0,-126.056c0,-6.748 0.486,-13.492 2.474,-18.315c5.414,-13.475 17.767,-27.434 38.494,-27.434c27.135,0 38.007,20.707 38.007,51.037l0,120.768l75.024,0Zm-307.552,-334.556c-25.674,0 -42.448,16.879 -42.448,39.002c0,21.658 16.264,39.002 41.455,39.002l0.484,0c26.165,0 42.452,-17.344 42.452,-39.002c-0.485,-22.092 -16.241,-38.954 -41.943,-39.002Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Notes from My Journey Learning Javascript and React.js on reddit"
        href="https://reddit.com/submit?url=https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f&title=Notes%20from%20My%20Journey%20Learning%20Javascript%20and%20React.js">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-3.446,265.638c0,-22.964 -18.616,-41.58 -41.58,-41.58c-11.211,0 -21.361,4.457 -28.841,11.666c-28.424,-20.508 -67.586,-33.757 -111.204,-35.278l18.941,-89.121l61.884,13.157c0.756,15.734 13.642,28.29 29.56,28.29c16.407,0 29.706,-13.299 29.706,-29.701c0,-16.403 -13.299,-29.702 -29.706,-29.702c-11.666,0 -21.657,6.792 -26.515,16.578l-69.105,-14.69c-1.922,-0.418 -3.939,-0.042 -5.585,1.036c-1.658,1.073 -2.811,2.761 -3.224,4.686l-21.152,99.438c-44.258,1.228 -84.046,14.494 -112.837,35.232c-7.468,-7.164 -17.589,-11.591 -28.757,-11.591c-22.965,0 -41.585,18.616 -41.585,41.58c0,16.896 10.095,31.41 24.568,37.918c-0.639,4.135 -0.99,8.328 -0.99,12.576c0,63.977 74.469,115.836 166.33,115.836c91.861,0 166.334,-51.859 166.334,-115.836c0,-4.218 -0.347,-8.387 -0.977,-12.493c14.564,-6.47 24.735,-21.034 24.735,-38.001Zm-119.474,108.193c-20.27,20.241 -59.115,21.816 -70.534,21.816c-11.428,0 -50.277,-1.575 -70.522,-21.82c-3.007,-3.008 -3.007,-7.882 0,-10.889c3.003,-2.999 7.882,-3.003 10.885,0c12.777,12.781 40.11,17.317 59.637,17.317c19.522,0 46.86,-4.536 59.657,-17.321c3.016,-2.999 7.886,-2.995 10.885,0.008c3.008,3.011 3.003,7.882 -0.008,10.889Zm-5.23,-48.781c-16.373,0 -29.701,-13.324 -29.701,-29.698c0,-16.381 13.328,-29.714 29.701,-29.714c16.378,0 29.706,13.333 29.706,29.714c0,16.374 -13.328,29.698 -29.706,29.698Zm-160.386,-29.702c0,-16.381 13.328,-29.71 29.714,-29.71c16.369,0 29.689,13.329 29.689,29.71c0,16.373 -13.32,29.693 -29.689,29.693c-16.386,0 -29.714,-13.32 -29.714,-29.693Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Notes from My Journey Learning Javascript and React.js on facebook"
        href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-106.468,0l0,-192.915l66.6,0l12.672,-82.621l-79.272,0l0,-53.617c0,-22.603 11.073,-44.636 46.58,-44.636l36.042,0l0,-70.34c0,0 -32.71,-5.582 -63.982,-5.582c-65.288,0 -107.96,39.569 -107.96,111.204l0,62.971l-72.573,0l0,82.621l72.573,0l0,192.915l-191.104,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Notes from My Journey Learning Javascript and React.js on whatsapp"
        href="https://api.whatsapp.com/send?text=Notes%20from%20My%20Journey%20Learning%20Javascript%20and%20React.js%20-%20https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f">
        <svg version="1.1" viewBox="0 0 512 512" xml:space="preserve" height="30px" width="30px" fill="currentColor">
            <path
                d="M449.446,0c34.525,0 62.554,28.03 62.554,62.554l0,386.892c0,34.524 -28.03,62.554 -62.554,62.554l-386.892,0c-34.524,0 -62.554,-28.03 -62.554,-62.554l0,-386.892c0,-34.524 28.029,-62.554 62.554,-62.554l386.892,0Zm-58.673,127.703c-33.842,-33.881 -78.847,-52.548 -126.798,-52.568c-98.799,0 -179.21,80.405 -179.249,179.234c-0.013,31.593 8.241,62.428 23.927,89.612l-25.429,92.884l95.021,-24.925c26.181,14.28 55.659,21.807 85.658,21.816l0.074,0c98.789,0 179.206,-80.413 179.247,-179.243c0.018,-47.895 -18.61,-92.93 -52.451,-126.81Zm-126.797,275.782l-0.06,0c-26.734,-0.01 -52.954,-7.193 -75.828,-20.767l-5.441,-3.229l-56.386,14.792l15.05,-54.977l-3.542,-5.637c-14.913,-23.72 -22.791,-51.136 -22.779,-79.287c0.033,-82.142 66.867,-148.971 149.046,-148.971c39.793,0.014 77.199,15.531 105.329,43.692c28.128,28.16 43.609,65.592 43.594,105.4c-0.034,82.149 -66.866,148.983 -148.983,148.984Zm81.721,-111.581c-4.479,-2.242 -26.499,-13.075 -30.604,-14.571c-4.105,-1.495 -7.091,-2.241 -10.077,2.241c-2.986,4.483 -11.569,14.572 -14.182,17.562c-2.612,2.988 -5.225,3.364 -9.703,1.12c-4.479,-2.241 -18.91,-6.97 -36.017,-22.23c-13.314,-11.876 -22.304,-26.542 -24.916,-31.026c-2.612,-4.484 -0.279,-6.908 1.963,-9.14c2.016,-2.007 4.48,-5.232 6.719,-7.847c2.24,-2.615 2.986,-4.484 4.479,-7.472c1.493,-2.99 0.747,-5.604 -0.374,-7.846c-1.119,-2.241 -10.077,-24.288 -13.809,-33.256c-3.635,-8.733 -7.327,-7.55 -10.077,-7.688c-2.609,-0.13 -5.598,-0.158 -8.583,-0.158c-2.986,0 -7.839,1.121 -11.944,5.604c-4.105,4.484 -15.675,15.32 -15.675,37.364c0,22.046 16.048,43.342 18.287,46.332c2.24,2.99 31.582,48.227 76.511,67.627c10.685,4.615 19.028,7.371 25.533,9.434c10.728,3.41 20.492,2.929 28.209,1.775c8.605,-1.285 26.499,-10.833 30.231,-21.295c3.732,-10.464 3.732,-19.431 2.612,-21.298c-1.119,-1.869 -4.105,-2.99 -8.583,-5.232Z" />
        </svg>
    </a>
    <a target="_blank" rel="noopener noreferrer" aria-label="share Notes from My Journey Learning Javascript and React.js on telegram"
        href="https://telegram.me/share/url?text=Notes%20from%20My%20Journey%20Learning%20Javascript%20and%20React.js&amp;url=https%3a%2f%2fdavidxiao.me%2fposts%2fnotes-from-my-journey-in-reactjs%2f">
        <svg version="1.1" xml:space="preserve" viewBox="2 2 28 28" height="30px" width="30px" fill="currentColor">
            <path
                d="M26.49,29.86H5.5a3.37,3.37,0,0,1-2.47-1,3.35,3.35,0,0,1-1-2.47V5.48A3.36,3.36,0,0,1,3,3,3.37,3.37,0,0,1,5.5,2h21A3.38,3.38,0,0,1,29,3a3.36,3.36,0,0,1,1,2.46V26.37a3.35,3.35,0,0,1-1,2.47A3.38,3.38,0,0,1,26.49,29.86Zm-5.38-6.71a.79.79,0,0,0,.85-.66L24.73,9.24a.55.55,0,0,0-.18-.46.62.62,0,0,0-.41-.17q-.08,0-16.53,6.11a.59.59,0,0,0-.41.59.57.57,0,0,0,.43.52l4,1.24,1.61,4.83a.62.62,0,0,0,.63.43.56.56,0,0,0,.4-.17L16.54,20l4.09,3A.9.9,0,0,0,21.11,23.15ZM13.8,20.71l-1.21-4q8.72-5.55,8.78-5.55c.15,0,.23,0,.23.16a.18.18,0,0,1,0,.06s-2.51,2.3-7.52,6.8Z" />
        </svg>
    </a>
</div>
  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://davidxiao.me/">David Xiao&#39;s Garage</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
